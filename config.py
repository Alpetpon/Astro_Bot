import os
import logging
from dotenv import load_dotenv

load_dotenv()

logger = logging.getLogger(__name__)


class Config:
    """–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞"""
    
    # Telegram - –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç (–≤–æ—Ä–æ–Ω–∫–∞ –ø—Ä–æ–¥–∞–∂)
    BOT_TOKEN = os.getenv('BOT_TOKEN')
    
    # Telegram - —É—á–µ–±–Ω—ã–π –±–æ—Ç (–æ–±—É—á–µ–Ω–∏–µ)
    LEARNING_BOT_TOKEN = os.getenv('LEARNING_BOT_TOKEN')
    LEARNING_BOT_USERNAME = os.getenv('LEARNING_BOT_USERNAME', 'your_learning_bot')  # Username –±–µ–∑ @
    
    # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
    # –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –æ–¥–∏–Ω ID –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
    @staticmethod
    def _parse_admin_ids():
        """–ü–∞—Ä—Å–∏–Ω–≥ ADMIN_ID –∏–∑ .env (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö ID —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)"""
        admin_str = os.getenv('ADMIN_ID', '0')
        try:
            # –ï—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ ID —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
            if ',' in admin_str:
                return [int(id.strip()) for id in admin_str.split(',') if id.strip()]
            # –ï—Å–ª–∏ –æ–¥–∏–Ω ID
            return [int(admin_str)]
        except ValueError:
            logger.error(f"Invalid ADMIN_ID format: {admin_str}")
            return [0]
    
    ADMIN_IDS = _parse_admin_ids()  # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–¥–º–∏–Ω–æ–≤
    ADMIN_ID = ADMIN_IDS[0] if ADMIN_IDS else 0  # –û—Å–Ω–æ–≤–Ω–æ–π –∞–¥–º–∏–Ω (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
    
    # –ÆKassa
    YOOKASSA_SHOP_ID = os.getenv('YOOKASSA_SHOP_ID')
    YOOKASSA_SECRET_KEY = os.getenv('YOOKASSA_SECRET_KEY')
    WEBHOOK_URL = os.getenv('WEBHOOK_URL', '')
    
    # Telegram –∫–∞–Ω–∞–ª –¥–ª—è –ø–ª–∞—Ç–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏
    SUBSCRIPTION_CHANNEL_ID = os.getenv('SUBSCRIPTION_CHANNEL_ID', '')  # –ù–∞–ø—Ä–∏–º–µ—Ä: -1003244100380
    SUBSCRIPTION_PRICE = float(os.getenv('SUBSCRIPTION_PRICE', '990.00'))
    SUBSCRIPTION_DAYS = int(os.getenv('SUBSCRIPTION_DAYS', '30'))
    SUBSCRIPTION_CURRENCY = os.getenv('SUBSCRIPTION_CURRENCY', 'RUB')
    
    # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MongoDB
    @staticmethod
    def _get_mongodb_url():
        """–ü–æ–ª—É—á–µ–Ω–∏–µ URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MongoDB"""
        mongodb_url = os.getenv('MONGODB_URL')
        
        if mongodb_url:
            logger.info("Using MONGODB_URL from environment")
            return mongodb_url
        
        # –õ–æ–∫–∞–ª—å–Ω–∞—è MongoDB –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        default_url = 'mongodb://localhost:27017'
        logger.info(f"Using default MongoDB URL: {default_url}")
        return default_url
    
    MONGODB_URL = _get_mongodb_url()
    MONGODB_DB_NAME = os.getenv('MONGODB_DB_NAME', 'astro_bot')
    
    # –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π
    CONSULTATION_TELEGRAM = 'Katrin_fucco'  # Username –±–µ–∑ @
    
    # –°–æ—Ü. —Å–µ—Ç–∏ (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä—è–º–æ –≤ –∫–æ–¥–µ)
    INSTAGRAM_URL = 'https://www.instagram.com/ohuevshaya_i?igsh=aTF0YnltanIzYm5z'
    YOUTUBE_URL = 'https://youtube.com/@katrin_f?si=y3piuaqhKwAX10OR'
    VK_URL = 'https://sponsr.ru/katrin_fucco'
    TELEGRAM_CHANNEL_URL = 'https://t.me/astrotaroKatrinF'
    DZEN_URL = 'https://dzen.ru/katrin_fucco'
    
    # –í–∏–¥–µ–æ (File ID –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∑–¥–µ—Å—å –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)
    # –ó–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ —ç—Ç–∏–º–∏
    WELCOME_VIDEO_FILE_ID = ''  # File ID –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤–∏–¥–µ–æ
    ABOUT_ME_VIDEO_FILE_ID = ''  # File ID –≤–∏–¥–µ–æ-–∏–Ω—Ç–µ—Ä–≤—å—é "–û–±–æ –º–Ω–µ"
    
    # –¢–µ–∫—Å—Ç—ã
    WELCOME_TEXT = """
üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä –∞—Å—Ç—Ä–æ–ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏!

–Ø –ø–æ–º–æ–≥—É –≤–∞–º:
üåü –£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ –∫—É—Ä—Å–∞—Ö –∏ –æ–±—É—á–µ–Ω–∏–∏
üìö –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º
üí´ –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å

"""
    
    MAIN_MENU_TEXT = """–ê—Å—Ç—Ä–æ–ª–æ–≥–∏—è ‚Äî —ç—Ç–æ –∫–∞–∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –¥—É—à–∏ –≤ –º–æ–º–µ–Ω—Ç —Ä–æ–∂–¥–µ–Ω–∏—è! –ù–∞ –Ω–µ–π –æ—Ç–ø–µ—á–∞—Ç–∞–Ω–æ –≤—Å—ë: —Ç–≤–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä, –≤—ã–±–æ—Ä—ã, —Å—Ç—Ä–∞—Ö–∏, –∂–µ–ª–∞–Ω–∏—è. –û–Ω–∞ —Ö—Ä–∞–Ω–∏—Ç –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Ç–æ–º, –∫–µ–º —Ç—ã –±—ã–ª, –∑–∞—á–µ–º –ø—Ä–∏—à—ë–ª –∏ –∫—É–¥–∞ –∏–¥—ë—à—å.

–ß–µ—Ä–µ–∑ –∫–∞—Ä—Ç—É –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–æ–±—ã—Ç–∏—è, –∞ —Å–º—ã—Å–ª –∑–∞ –Ω–∏–º–∏. –¢–æ, —Ä–∞–¥–∏ —á–µ–≥–æ –≤—Å—ë —ç—Ç–æ —Å–ª—É—á–∞–µ—Ç—Å—è. üí´

–í –Ω–µ–π –Ω–µ—Ç –ø—Ä–∏–≥–æ–≤–æ—Ä–æ–≤, —Ç–æ–ª—å–∫–æ –ø–æ–¥—Å–∫–∞–∑–∫–∏. –ó–≤—ë–∑–¥—ã –Ω–µ —É–ø—Ä–∞–≤–ª—è—é—Ç —Ç–æ–±–æ–π, –æ–Ω–∏ –ª–∏—à—å –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –≥–¥–µ —Å–ø—Ä—è—Ç–∞–Ω–∞ —Ç–≤–æ—è —Å–∏–ª–∞, –∏ —á—Ç–æ —Å–µ–π—á–∞—Å –ø—Ä–æ—Å–∏—Ç—Å—è –Ω–∞ —Å–≤–µ—Ç.

–ü–æ–π–¥—ë–º, –ø–æ–∫–∞–∂—É, –∫–∞–∫ —Ç–≤–æ—è –∫–∞—Ä—Ç–∞ –æ–∂–∏–≤–∞–µ—Ç."""
    
    # –¢–µ–∫—Å—Ç –æ–ø–∏—Å–∞–Ω–∏—è –∫–∞–Ω–∞–ª–∞ —Å –ø–æ–¥–ø–∏—Å–∫–æ–π
    SUBSCRIPTION_CHANNEL_TEXT = """üí´ **–ñ–∏—Ç—å –±–µ–∑ –Ω–∞–¥—Ä—ã–≤–∞** ‚Äî –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ –º–æ–∂–Ω–æ –≤—ã–¥–æ—Ö–Ω—É—Ç—å –∏ –ø–æ–Ω—è—Ç—å, —á—Ç–æ —Å —Ç–æ–±–æ–π –≤—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ.

–ó–¥–µ—Å—å –º—ã –ø—Ä–æ–∂–∏–≤–∞–µ–º –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ –º—è–≥–∫–æ, –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ, –±–µ–∑ –±–æ—Ä—å–±—ã.

–ö–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å:
‚ú® –∞—É–¥–∏–æ-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø—Ä–æ–≥–Ω–æ–∑—ã –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è,
üåï –ª—É–Ω–Ω—ã–µ –ø–æ—Ä—Ç–∞–ª—ã ‚Äî –Ω–æ–≤–æ–ª—É–Ω–∏–µ –∏ –ø–æ–ª–Ω–æ–ª—É–Ω–∏–µ,
üïä –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —è—Å–Ω–æ—Å—Ç–∏,
üíû –∂–∏–≤—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å.

–¢—ã –Ω–∞—á–∏–Ω–∞–µ—à—å —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –∫–∞–∫ —Å –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–æ–º –≤ —Ä—É–∫–∞—Ö –∏ –ø–æ–Ω–∏–º–∞–µ—à—å, —á—Ç–æ —Å–µ–π—á–∞—Å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –ª—É—á—à–µ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å, –∞ –∫–æ–≥–¥–∞ –∑–∞–º–µ–¥–ª–∏—Ç—å—Å—è, –∫–∞–∫ –ø—Ä–æ–∂–∏–≤–∞—Ç—å —Ü–∏–∫–ª—ã –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ —ç–Ω–µ—Ä–≥–∏–∏ –∏ –≤–µ—Ä—ã –≤ —Å–µ–±—è.

–≠—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ –≤—Å—ë —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–∞ —Å–≤–æ–∏ –º–µ—Å—Ç–∞. ü§ç

–ü–æ–¥–ø–∏—Å–∫–∞ ‚Äî 990‚ÇΩ / –º–µ—Å—è—Ü."""
    
    ABOUT_ME_TEXT = """
üë§ **–ú–æ–π –ø—É—Ç—å**

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∞—Å—Ç—Ä–æ–ª–æ–≥ –∏ –ø—Å–∏—Ö–æ–ª–æ–≥ —Å –æ–ø—ã—Ç–æ–º –±–æ–ª–µ–µ 10 –ª–µ—Ç.

–ü–æ–º–æ–≥–∞—é –ª—é–¥—è–º:
‚Ä¢ –ü–æ–∑–Ω–∞—Ç—å —Å–µ–±—è —á–µ—Ä–µ–∑ –ø—Ä–∏–∑–º—É –∞—Å—Ç—Ä–æ–ª–æ–≥–∏–∏
‚Ä¢ –£–ª—É—á—à–∏—Ç—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è
‚Ä¢ –ù–∞–π—Ç–∏ —Å–≤–æ–µ –ø—Ä–∏–∑–≤–∞–Ω–∏–µ
‚Ä¢ –ü–æ–Ω—è—Ç—å –∂–∏–∑–Ω–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã

–ú–æ—è —ç–∫—Å–ø–µ—Ä—Ç–∏–∑–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Å–∏–Ω—Ç–µ–∑–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –∞—Å—Ç—Ä–æ–ª–æ–≥–∏–∏ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏.

üé• [–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤—å—é —Å–æ –º–Ω–æ–π](https://youtu.be/ZbksvyO_Olw?si=rZsk8u7ZzRcXiWh1)
"""
    

config = Config()

