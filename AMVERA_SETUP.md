# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Amvera

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –∫–∞–∂–¥–æ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –Ω–∞ Amvera –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±–Ω—É–ª—è–ª–∞—Å—å.

## –†–µ—à–µ–Ω–∏–µ

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ persistent storage

–í `amvera.yml` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:
```yaml
run:
  persistenceMount: /data
```

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `USE_PERSISTENT_STORAGE=true` –≤ Dockerfile, –∫–æ—Ç–æ—Ä–∞—è —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/data` –¥–ª—è –ë–î.

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞:
```
Using persistent storage: sqlite:////data/astro_bot.db
```

‚ùå **–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:**
```
Initializing database at: sqlite:///./astro_bot.db
Database stats: 0 courses, 0 consultations, 0 guides
```

‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–û:**
```
Initializing database at: sqlite:////data/astro_bot.db
Database stats: 3 courses, 11 consultations, X guides
```

## –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ë–î

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω—É–∂–Ω–æ **–æ–¥–∏–Ω —Ä–∞–∑** –∑–∞–ø–æ–ª–Ω–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
python fill_database.py
```

–ó–∞—Ç–µ–º –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å —Ñ–∞–π–ª `astro_bot.db` –∏ –∑–∞–ø—É—à–∏—Ç—å –Ω–∞ Amvera (–µ—Å–ª–∏ –ë–î –ª–æ–∫–∞–ª—å–Ω–∞—è).

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ SSH –Ω–∞ Amvera

–ï—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ SSH –∫ —Å–µ—Ä–≤–µ—Ä—É Amvera:
```bash
ssh your-server
cd /path/to/project
python fill_database.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±–æ—Ç–∞

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `/admin` –≤ –±–æ—Ç–µ –∏ —Å–æ–∑–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

## –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ

‚ö†Ô∏è **–û–°–¢–ê–ù–û–í–ò–¢–ï –õ–û–ö–ê–õ–¨–ù–´–ô –ë–û–¢ –ü–ï–†–ï–î –î–ï–ü–õ–û–ï–ú!**

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É:
```
TelegramConflictError: Conflict: terminated by other getUpdates request; 
make sure that only one bot instance is running
```

–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:
- –ù–∞ –≤–∞—à–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
- –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ Amvera

**–†–µ—à–µ–Ω–∏–µ:** –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π –±–æ—Ç (Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –≥–¥–µ –æ–Ω –∑–∞–ø—É—â–µ–Ω).

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –ø–æ—Å–ª–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
- ‚úÖ 3 –∫—É—Ä—Å–∞ (–û—Å–Ω–æ–≤—ã –∞—Å—Ç—Ä–æ–ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏, LoveCode, –ü–∞–∫–µ—Ç)
- ‚úÖ 11 –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π (—Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∏–¥—ã –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π)
- ‚úÖ –ì–∞–π–¥—ã (—Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –Ω–∞ Amvera
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –ø—É—Ç—å –∫ –ë–î –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `/data/astro_bot.db`
3. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –≥–∞–π–¥ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≥–∞–π–¥ –æ—Å—Ç–∞–ª—Å—è –Ω–∞ –º–µ—Å—Ç–µ

–ï—Å–ª–∏ –≥–∞–π–¥ –æ—Å—Ç–∞–ª—Å—è - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ

